@model MarkomPos.Model.ViewModel.OfferIndexVm

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="um-wrap">
    <div class="container">
        <div class="card">
            <div class="card-header">
                <div class="btn-create-wrap">
                    <a class="btn btn-default create" href="javascript:void(0)">Create New</a>
                </div>
            </div>
            <div class="card-body">
                <div class="form-group col-md-3">
                    <label>Date range filter:</label>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">
                                <i class="far fa-calendar-alt"></i>
                            </span>
                        </div>
                        <input type="text" class="form-control float-right" id="filterDate" onchange="dateRangeChange(this)">
                    </div>
                </div>
                <div id="dvOffer"></div>
            </div>
        </div>
    </div>
</section>

<div id="dvOfferValidation" class="mrgDT">
</div>


<div id="dialog">
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/jquery-ui.js" type="text/javascript"></script>
@*<script src="~/Content/JS/rowReorder.js"></script>*@
<script>
    $(document).ready(function () {
        //var d = new Date();
        //d.setMonth(d.getMonth() - 1);

        //var dt_from = $.datepicker.formatDate('dd/mm/yy', d);
        //var dt_to = $.datepicker.formatDate('dd/mm/yy', new Date());
        //$('#filterDate').val(dt_from + " - " + dt_to);

        $('#filterDate').daterangepicker({
            locale: {
                format: "MM/DD/YYYY"
            }
        });

    });

    function dateRangeChange(val) {
        $.ajax({
            url: '/Offers/OfferFilter?dateRange=' + val.value,
            datatype: "json",
            type: "post",
            contenttype: 'application/json; charset=utf-8',
            async: true,
            success: function (data) {
                $("#dvOffer").html(data);
            },
            error: function (xhr) {
                alert('error');
            }
        });
    }
</script>
